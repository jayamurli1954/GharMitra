---

# ‚úÖ **Acceptance Criteria ‚Äî CR-2026-01-08-022**

## **1Ô∏è‚É£ Expense Entry**

### **AC-1.1 Mandatory Month Field**

When a user creates or edits an expense
Then the field **‚ÄúExpense For Month‚Äù (YYYY-MM)** must be present
And it must be **mandatory**
And the expense **must not save** if it is empty.

---

### **AC-1.2 Default Value**

When the expense entry screen opens
Then **Expense For Month** must default to the **current month**
But user must be able to change it.

---

### **AC-1.3 Independent From Payment Date**

When a user selects:

* Payment Date = `05-Jan-2026`
* Expense For Month = `Dec-2025`

Then the system must store:

```
transaction_date = 2026-01-05
expense_month    = 2025-12-01
```

And not override either.

---

## **2Ô∏è‚É£ Database Integrity**

### **AC-2.1 Schema Enforcement**

Every row in `expenses` table must have:

```
expense_month NOT NULL
```

No legacy or new record may exist without it.

---

### **AC-2.2 Historical Data**

Existing expenses (before this CR) must be migrated so that:

```
expense_month = month(transaction_date)
```

---

## **3Ô∏è‚É£ Maintenance Bill Generation**

### **AC-3.1 Month-Based Filtering**

When a user generates maintenance bills for **December-2025**
Then the system must include **only expenses where**:

```
expense_month = 2025-12
```

Not transaction_date.

---

### **AC-3.2 Payment Timing Must Not Affect Bills**

If:

* Expense paid in Jan
* Expense month = Dec

Then:

* It must appear in **December bill**
* It must NOT appear in January bill

---

## **4Ô∏è‚É£ Income & Expense Reports**

### **AC-4.1 P&L Uses Expense Month**

When generating Income & Expense report for `Dec-2025`
Then all totals must be computed using:

```
expense_month = Dec-2025
```

Not payment date.

---

### **AC-4.2 Cash/Bank Uses Payment Date**

Cash Book and Bank Book must still be based on:

```
transaction_date
```

This creates two independent timelines:

* Accounting timeline = expense_month
* Cash timeline = transaction_date

---

## **5Ô∏è‚É£ Audit & Data Traceability**

### **AC-5.1 Dual Visibility**

Every expense record must display:

* Payment Date
* Expense For Month

In:

* Expense list
* Drill-down view
* Export (Excel/PDF)

---

### **AC-5.2 Edit Restrictions**

If a maintenance bill is already generated for a month,
Then any expense with that `expense_month` must:

* Not be editable without admin override
  OR
* Trigger bill recalculation warning.

---

## **6Ô∏è‚É£ User Experience**

### **AC-6.1 Clear Label**

UI must show:

> **Expense For Month (Which month this expense belongs to)**

Tooltip or helper text must explain:

> ‚ÄúSelect the month in which this service was used, even if paid later.‚Äù

---

### **AC-6.2 Validation Message**

If user tries to save without Expense Month:

> ‚ÄúPlease select the month this expense belongs to.‚Äù

---

## **7Ô∏è‚É£ Reports Consistency**

### **AC-7.1 Month Totals Must Match**

For any month X:

```
SUM(expenses where expense_month = X)
must equal
Total expenses shown in X month maintenance bills
```

No rounding or leakage allowed.

---

## **8Ô∏è‚É£ Backward Compatibility**

### **AC-8.1 Existing Societies**

Existing societies using GharMitra must:

* Not lose data
* See historical expenses auto-mapped

---

# üèÜ This CR is considered **SUCCESSFUL** only if:

| Test                                                        | Result |
| ----------------------------------------------------------- | ------ |
| December expenses paid in January appear in December bill   | ‚úÖ      |
| Bank shows January payment                                  | ‚úÖ      |
| December P&L shows expense                                  | ‚úÖ      |
| January P&L does not show it                                | ‚úÖ      |
| User can understand the screen without accounting knowledge | ‚úÖ      |

---